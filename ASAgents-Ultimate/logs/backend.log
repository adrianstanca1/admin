
> asagents-backend@1.0.0 dev
> npx tsx watch src/index.ts

üöÄ Starting ASAgents Backend Server...
üìä Environment: production
üåê CORS Origin: http://localhost:5173,http://localhost:4000,http://localhost:4001,http://localhost:4002,http://localhost:4003
üóÑÔ∏è Initializing database...
üîÑ Running database migrations...
üîÑ Running database migrations...
Connected to SQLite database: /Users/admin/ASAgents-Ultimate/backend/database.sqlite
üìù Executing 74 SQL statements...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS companies ( id TEXT PRIMARY KEY, ...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS users ( id TEXT PRIMARY KEY, emai...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS projects ( id TEXT PRIMARY KEY, n...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS tasks ( id TEXT PRIMARY KEY, proj...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS invoices ( id TEXT PRIMARY KEY, i...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS invoice_items ( id TEXT PRIMARY K...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS expenses ( id TEXT PRIMARY KEY, p...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS documents ( id TEXT PRIMARY KEY, ...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS equipment ( id TEXT PRIMARY KEY, ...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS equipment_assignments ( id TEXT P...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS safety_incidents ( id TEXT PRIMAR...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS time_entries ( id TEXT PRIMARY KE...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS notifications ( id TEXT PRIMARY K...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS audit_logs ( id TEXT PRIMARY KEY,...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS project_members ( id TEXT PRIMARY...
‚úÖ Executed: CREATE TABLE IF NOT EXISTS file_processing_results ( id TEXT...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_companies_updated_at AFT...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_users_updated_at AFTER U...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_projects_updated_at AFTE...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_tasks_updated_at AFTER U...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_invoices_updated_at AFTE...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_expenses_updated_at AFTE...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_documents_updated_at AFT...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_equipment_updated_at AFT...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_safety_incidents_updated...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_time_entries_updated_at ...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_file_processing_results_...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_invoice_totals_on_item_i...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_invoice_totals_on_item_u...
‚úÖ Executed: CREATE TRIGGER IF NOT EXISTS update_invoice_totals_on_item_d...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_users_email ON users(email);...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_users_company_id ON users(com...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_projects_company_id ON projec...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_projects_status ON projects(s...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_projects_manager_id ON projec...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_projects_client_id ON project...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_tasks_project_id ON tasks(pro...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_tasks_assigned_to ON tasks(as...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_tasks_status ON tasks(status)...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_invoices_company_id ON invoic...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_invoices_client_id ON invoice...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_invoices_project_id ON invoic...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_invoices_status ON invoices(s...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_invoices_issue_date ON invoic...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_invoices_due_date ON invoices...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_invoice_items_invoice_id ON i...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_expenses_project_id ON expens...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_expenses_company_id ON expens...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_expenses_category ON expenses...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_expenses_date ON expenses(dat...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_expenses_created_by ON expens...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_documents_project_id ON docum...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_documents_company_id ON docum...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_documents_type ON documents(t...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_by ON docu...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_equipment_company_id ON equip...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_equipment_status ON equipment...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_equipment_assignments_equipme...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_equipment_assignments_project...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_safety_incidents_project_id O...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_safety_incidents_status ON sa...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_safety_incidents_severity ON ...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_time_entries_user_id ON time_...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_time_entries_project_id ON ti...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_time_entries_task_id ON time_...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_notifications_user_id ON noti...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_notifications_read_at ON noti...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_audit_logs_user_id ON audit_l...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_audit_logs_entity_type ON aud...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_audit_logs_entity_id ON audit...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_project_members_project_id ON...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_project_members_user_id ON pr...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_file_processing_results_docum...
‚úÖ Executed: CREATE INDEX IF NOT EXISTS idx_file_processing_results_statu...
‚úÖ Database migrations completed successfully!
üìä Created tables:
  - audit_logs
  - companies
  - documents
  - equipment
  - equipment_assignments
  - expenses
  - file_processing_results
  - invoice_items
  - invoices
  - notifications
  - project_members
  - projects
  - safety_incidents
  - tasks
  - time_entries
  - users
üìà Database stats: 16 tables, 0 rows, 344 KB
‚úÖ Database connected successfully
üéâ Server running on port 3000
üì° API: http://localhost:3000/api
üîå WebSocket: ws://localhost:3000/ws
‚ù§Ô∏è Health Check: http://localhost:3000/api/health
‚ú® ASAgents Backend is ready!
::1 - - [29/Sep/2025:23:00:51 +0000] "GET /api/health HTTP/1.1" 200 426 "-" "curl/8.7.1"
::1 - - [29/Sep/2025:23:01:53 +0000] "GET /api/health HTTP/1.1" 200 425 "-" "curl/8.7.1"
::1 - - [29/Sep/2025:23:01:53 +0000] "GET /api/projects HTTP/1.1" 401 51 "-" "curl/8.7.1"
